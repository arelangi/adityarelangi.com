function minVal(a,b){var c=a[0][b];for(i=1;i<a.length;i++)null!=a[i][b]&&c>a[i][b]&&(c=a[i][b]);return c}function maxVal(a,b){var c=a[0][b];for(i=1;i<a.length;i++)null!=a[i][b]&&c<a[i][b]&&(c=a[i][b]);return c}function getData(a){$.ajax({url:a,dataType:"json",async:!1,timeout:3e3,success:function(a){return masterData=a},error:function(a){alert(a.responseText)}})}function zoom(){svg.attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")")}function renderHeatMap(a,b){var c=d3.scale.linear().range(["#E4FF7A","#FC7F00"]);for(c.domain([minVal(a,b),maxVal(a,b)]),$("#legend-low").text(minVal(a,b)+"%"),$("#legend-high").text(maxVal(a,b)+"%"),i=0;i<a.length;i++)$("#"+a[i].Code).attr("fill",a[i][b]?c(a[i][b]):"#aec7e8"),$("#"+a[i].Code).attr("tooltip",a[i][b]),$("#"+a[i].Code).attr("state",a[i].States),$("#"+a[i].Code).tipsy({gravity:$.fn.tipsy.autoNS,html:!0,title:function(){var a=$(this).attr("tooltip");return"<span>"+$(this).attr("state")+" - "+(a?a+"%":"NA")+"</span>"}})}var masterData;